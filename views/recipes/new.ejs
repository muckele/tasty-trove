<%- include('../partials/html-head') %>
<link rel="stylesheet" href="/stylesheets/recipes/new.css" />
<%- include('../partials/nav') %>

<main>
  <h1>Create a New Recipe</h1>
  <form id="new-form" action="/recipes" method="POST">
    <label for="name-input">Name:</label>
    <input type="text" name="name" id="name-input">
    <label for="total-time-input">Total Time:</label>
    <input type="number" name="totalTime" id="total-time-input">
    <label for="prep-time-input">Prep Time:</label>
    <input type="number" name="prepTime" id="prep-time-input">
    <label for="cook-time-input">Cook Time:</label>
    <input type="number" name="cookTime" id="cook-time-input">
    <label for="ingredients-input">Ingredients (separate ingredients with commas):</label>
    <input type="text" name="ingredients" id="ingredients-input">

    <label for="preparation-input">Preparation:</label>
    <ol id="preparation-list" name="preparation">
        <li><input type="text" name="preparationStep1" placeholder="Step 1"></li>
    </ol>
    <button type="submit">Create Recipe</button>
  </form>

  <script>
    document.getElementById('preparation-list').addEventListener('keydown', function(event) {
      if (event.key === 'Enter') {
        event.preventDefault()
        addNewListItem()
      }
    })

    function addNewListItem() {
      let ol = document.getElementById('preparation-list')
      let newLi = document.createElement('li')
      newLi.innerHTML = '<input type="text" name="preparationStep' + (ol.childElementCount + 1) + '" placeholder="Step ' + (ol.childElementCount + 1) + '">'
      ol.appendChild(newLi)
    }
  </script>
</main>

<%- include("../partials/footer") %>